“对 FFT 运算的能量进行非相干累加”这句话，在 GNSS 接收机和信号处理（尤其是**信号捕获**阶段）的背景下，指的是一种**高效的弱信号检测技术**。

它的核心思想是：**将多次傅里叶变换（FFT）结果的能量（幅度平方）简单相加，以增强信号，同时避免相位上的不确定性。**

---

### 1. 概念分解

我们将其分解成三个部分来理解：

#### A. FFT 运算（Fast Fourier Transform）
FFT 的作用是：
1.  **解扩（相关运算）：** 通过频域乘法实现 PRN 码的快速解扩。
2.  **频率搜索：** 将信号按不同的多普勒频率进行分解。

#### B. 能量（Energy）
信号的能量用**幅度平方**来表示，即 $|X(f)|^2$。

#### C. 非相干累加（Non-Coherent Integration, NCI）
指在累加过程中，**不考虑**每次 FFT 结果的**相位**信息，只累加它们的**幅度平方（能量）**。

$$\text{最终能量} = \sum_{m=1}^M |X_m(k)|^2$$

---

### 2. 为什么需要“非相干累加”？

非相干累加是用来解决**长时积累**中的两个主要问题：**数据跳变**和**相位不稳定**。

#### A. 解决数据跳变问题（GNSS 特有）
* **相干累加的问题：** 如果积累时间跨越数据跳变（相位反转 $180^\circ$），信号会被抵消。
* **非相干累加的解决：** 累加能量 $|X(k)|^2$，相位反转不影响能量，因此不会发生抵消。

#### B. 解决载波相位不稳定问题（通用）
在信号捕获的初始阶段，载波相位可能由于时钟和传播误差而**随机漂移**。
* **非相干累加的解决：** 丢弃相位信息，只累加能量，可以避免由于相位漂移导致的信号能量损失，从而提高捕获的成功率。

---

### 3. 与相干累加的区别

| 特性 | 相干累加（Coherent Integration, CI） | 非相干累加（Non-Coherent Integration, NCI） |
| :--- | :--- | :--- |
| **公式** | [见公式1](#formula1) | [见公式2](#formula2) |
| **信噪比增益**| $\mathbf{M}$ 倍（信号功率增益 $M^2$，噪声功率增益 $M$）| **$\sqrt{M}$** 倍（信号功率增益 $M$，噪声功率增益 $M$）|
| **适用环境** | **短时**积累（相位稳定，无数据跳变） | **长时**积累（弱信号，有数据跳变） |

**结论：** 在 GNSS 捕获中，通常先进行短时相干积累，然后对多次积累的**能量**进行**非相干累加**，以实现总的长时间积累。


---
<a id="formula1"></a>
#### 公式 1: 相干累加（CI）公式

相干累加是先对 $M$ 次 FFT 结果（复数 $X_m(k)$）求和，再取其幅度的平方（能量）：

$$\left| \sum_{m=1}^M X_m(k) \right|^2$$

<a id="formula2"></a>
#### 公式 2: 非相干累加（NCI）公式

非相干累加是先对 $M$ 次 FFT 结果的幅度平方（能量 $|X_m(k)|^2$）求和：

$$\sum_{m=1}^M |X_m(k)|^2$$